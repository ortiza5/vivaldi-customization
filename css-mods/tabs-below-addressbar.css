#browser {
  --addressBarPaddingRight: 137px;
  --headerElementsHeight: 34px;
  --tabBarPaddingRightToSeeTrashAndSync: 92px;
  /* uncomment the line below to unify tab bar color with the address bar's */
  --unified: transparent;
  --backgroundColor: var(--unified, var(--colorBg));
  --backgroundColorAccent: var(--unified, var(--colorAccentBg));
}

/* top addressbar above top tabbar */
#header {
  padding-top: 36px;
}

/* allows mainbar to be positioned absolute */
#main {
  overflow: unset;
  position: unset;
}

.mainbar {
  position: absolute;
  top: 0;
  padding-left: 34px;
  padding-right: var(--addressBarPaddingRight);
  width: 100%;
  z-index: 2 !important;
}

/* not sure if needed... */
/* brings vivaldi button and win controls to front */
#browser.tabs-top #header {
  backdrop-filter: unset;
  contain: unset;
}
#browser.tabs-top.address-top #main {
  overflow: visible;
}

/* Sets tabs to fill entire bar */
#tabs-tabbar-container.top {
  margin-left: 0px !important;
  margin-right: -90px !important;
}
#browser.tabs-top.address-top #tabs-tabbar-container > div {
  padding-left: 2px;
}

/* bookmark bar enabled */
#browser.tabs-top.address-top.bookmark-bar-top #header {
  padding-top: 65px;
}
#browser.tabs-top.address-top.bookmark-bar-top .bookmark-bar {
  position: fixed;
  top: 34px;
  left: 0;
  right: 0;
}
#browser.tabs-top.address-top.bookmark-bar-top.maximized:not(.tabs-at-edge) .bookmark-bar {
  top: 41px;
}

/* horizontal menu enabled */
#browser.tabs-top.address-top.horizontal-menu #header {
  --headerElementsHeight: 24px;
}
/* Make window controls same color as menu bar */
#browser.tabs-top.address-top.horizontal-menu .window-buttongroup {
  background-color: var(--colorTabBar);
}
#browser.tabs-top.address-top.horizontal-menu #header {
  padding-top: 38px !important;
}
#browser.tabs-top.address-top.horizontal-menu .topmenu {
  transform: translateY(-38px);
  margin-bottom: 0;
  color: var(--colorFg);
}
#browser.tabs-top.address-top.horizontal-menu #tabs-tabbar-container {
  padding-top: 0;
}
#browser.tabs-top.address-top.horizontal-menu .mainbar {
  padding: unset;
  transform: translateY(24px);
}

/* bookmark bar & horizontal menu enabled */
#browser.tabs-top.address-top.horizontal-menu.bookmark-bar-top #header {
  padding-top: 65px !important;
}
#browser.tabs-top.address-top.horizontal-menu.bookmark-bar-top .topmenu {
  transform: translateY(-65px);
}
#browser.tabs-top.address-top.horizontal-menu.bookmark-bar-top .bookmark-bar {
  top: 58px !important;
}

/* ---------------------------- */
/*           New Stuff          */
/* ---------------------------- */

/* Shrink height of all the window action buttons */
.window-buttongroup button.window-minimize,
.window-buttongroup button.window-maximize,
.window-buttongroup button.window-close {
  height: var(--headerElementsHeight) !important;
}
/* Shrink height of Vivaldi menu button */
#titlebar button.vivaldi {
  height: var(--headerElementsHeight) !important;
  padding-top: 0;
}

/* Remove empty space to the right of tabs and above tabs*/
#tabs-container {
  padding-right: var(--tabBarPaddingRightToSeeTrashAndSync) !important;
}
#tabs-tabbar-container.top {
  padding-top: unset !important;
}

/* Make other title bar elements have the same color as the address bar elements */
#titlebar button.vivaldi,
.window-buttongroup {
  background-color: var(--backgroundColor);
  z-index: 3 !important;
}
.color-behind-tabs-off #titlebar button.vivaldi,
.color-behind-tabs-off .window-buttongroup {
  background-color: var(--backgroundColorAccent);
}
.toolbar-mainbar .toolbar-extensions,
.toolbar-mainbar {
  background-color: var(--backgroundColor);
}
.color-behind-tabs-off .toolbar-mainbar .toolbar-extensions,
.color-behind-tabs-off .toolbar-mainbar {
  background-color: var(--backgroundColorAccent);
}

/* Fix tabs showing above address bar and search dropdowns */
#tabs-tabbar-container.top {
  z-index: 0;
}

/* Remove line under address bar and extensions bar */
.address-top .mainbar > .toolbar-mainbar .toolbar-extensions:before,
.address-top .mainbar > .toolbar-mainbar:before {
  content: unset;
}

/* Move extension popups down to avoid crossing drag region which leads to dead zone */
.extension-popup.top {
  margin-top: 29px;
}
#browser.tabs-top.address-top.horizontal-menu .extension-popup.top {
  margin-top: 7px;
}
#browser.tabs-top.address-top.bookmark-bar-top .extension-popup.top {
  margin-top: 58px;
}
#browser.tabs-top.address-top.bookmark-bar-top.horizontal-menu .extension-popup.top {
  margin-top: 2px;
}
